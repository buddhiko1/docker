cms.buddhiko.com {
  reverse_proxy http://10.0.0.15:9000
}

docker.buddhiko.com {
  reverse_proxy http://10.0.0.15:10000
}

www.buddhiko.com {
  encode {
    gzip 6
    minimum_length 516
    match {
      header Content-Type text/*
      header Content-Type application/json*
      header Content-Type application/javascript*
      header Content-Type application/xhtml+xml*
      header Content-Type application/atom+xml*
      header Content-Type application/rss+xml*
      header Content-Type image/svg+xml*
      header Content-Type image/webp*

    }
  }
  handle {
    root * /srv/web
    try_files {path} /index.html
    file_server
  }
}

file.buddhiko.com {
  encode {
    gzip 6
    zstd
    minimum_length 516
    match {
      header Content-Type text/*
      header Content-Type application/json*
      header Content-Type application/javascript*
      header Content-Type application/xhtml+xml*
      header Content-Type application/atom+xml*
      header Content-Type application/rss+xml*
      header Content-Type image/svg+xml*
      header Content-Type image/webp*

    }
  }
  root * /srv/uploads
  file_server browse
}

git.buddhiko.com {
  reverse_proxy https://github.com {
    header_up Host {upstream_hostport}
    header_up X-Forwarded-Host {host}
    header_up origin https://github.com
    header_down location (https://github.com/)(.*) https://git.buddhiko.com/$2
  }
}
